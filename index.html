<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PFCバランス自動計算機</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .transition-all { transition: all 0.3s ease; }
        .fade-in { opacity: 1; transform: translateY(0); }
        .fade-out { opacity: 0; transform: translateY(10px); }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4">
    <div class="max-w-4xl mx-auto p-6 bg-white rounded-xl shadow-lg border border-gray-200">
        <!-- ヘッダー -->
        <div class="text-center mb-6">
            <h1 class="text-3xl font-bold text-gray-800 mb-2 flex items-center justify-center gap-2">
                <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                </svg>
                PFCバランス自動計算機
            </h1>
            <p class="text-gray-600">目標体型に合わせた最適な栄養バランスを算出</p>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
            <!-- 入力フォーム -->
            <div class="space-y-4">
                <!-- 基本情報 -->
                <div class="bg-gray-50 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                        基本情報
                    </h3>
                    
                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">身長 (cm)</label>
                            <input type="number" id="height" placeholder="170" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">体重 (kg)</label>
                            <input type="number" id="weight" placeholder="65" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-3 mb-3">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">年齢</label>
                            <input type="number" id="age" placeholder="25" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">性別</label>
                            <select id="gender" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                <option value="male">男性</option>
                                <option value="female">女性</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 活動レベル -->
                <div class="bg-gray-50 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        活動レベル
                    </h3>
                    <select id="activityLevel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        <option value="sedentary">低活動 - デスクワーク中心</option>
                        <option value="light">軽度活動 - 週1-3回の軽い運動</option>
                        <option value="moderate" selected>中度活動 - 週3-5回の運動</option>
                        <option value="high">高活動 - 週6-7回の激しい運動</option>
                        <option value="extreme">超高活動 - 1日2回以上の訓練</option>
                    </select>
                </div>

                <!-- 目標体型 -->
                <div class="bg-gray-50 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-3 flex items-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                        </svg>
                        目標体型
                    </h3>
                    <div class="grid grid-cols-2 gap-2">
                        <button id="goal-muscle" onclick="selectGoal('muscle')" class="goal-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all">
                            <div class="font-semibold text-red-600">マッスル</div>
                            <div class="text-xs text-gray-600 mt-1">筋肉増量・バルクアップ</div>
                        </button>
                        <button id="goal-slim" onclick="selectGoal('slim')" class="goal-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all">
                            <div class="font-semibold text-blue-600">スリム</div>
                            <div class="text-xs text-gray-600 mt-1">減量・ダイエット</div>
                        </button>
                        <button id="goal-maintain" onclick="selectGoal('maintain')" class="goal-btn p-3 rounded-lg border-2 border-indigo-500 bg-indigo-50 transition-all">
                            <div class="font-semibold text-green-600">現状維持</div>
                            <div class="text-xs text-gray-600 mt-1">体型維持・健康管理</div>
                        </button>
                        <button id="goal-athletic" onclick="selectGoal('athletic')" class="goal-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all">
                            <div class="font-semibold text-purple-600">アスリート</div>
                            <div class="text-xs text-gray-600 mt-1">パフォーマンス向上</div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 結果表示 -->
            <div class="space-y-4">
                <div id="results" class="space-y-4 hidden">
                    <!-- カロリー情報 -->
                    <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg p-4">
                        <h3 class="font-semibold mb-2 flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                            カロリー情報
                        </h3>
                        <div class="grid grid-cols-2 gap-4 text-sm">
                            <div>
                                <div class="opacity-80">基礎代謝</div>
                                <div id="bmr-value" class="text-xl font-bold">0</div>
                                <div class="text-xs opacity-70">kcal/日</div>
                            </div>
                            <div>
                                <div class="opacity-80">消費カロリー</div>
                                <div id="tdee-value" class="text-xl font-bold">0</div>
                                <div class="text-xs opacity-70">kcal/日</div>
                            </div>
                        </div>
                        <div class="mt-3 pt-3 border-t border-white/20">
                            <div class="text-center">
                                <div class="opacity-80">目標摂取カロリー</div>
                                <div id="target-calories" class="text-2xl font-bold">0</div>
                                <div class="text-xs opacity-70">kcal/日</div>
                            </div>
                        </div>
                    </div>

                    <!-- 目標設定表示 -->
                    <div id="goal-display" class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <div class="text-center">
                            <div id="goal-name" class="font-semibold text-lg text-green-600">現状維持向けPFCバランス</div>
                            <div id="goal-desc" class="text-sm opacity-70">体型維持・健康管理</div>
                        </div>
                    </div>

                    <!-- PFC詳細 -->
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-red-50 border border-red-200 rounded-lg p-3">
                            <div class="text-center">
                                <div class="text-red-700 font-semibold">P (タンパク質)</div>
                                <div id="protein-grams" class="text-2xl font-bold text-red-600">0g</div>
                                <div id="protein-calories" class="text-xs text-red-600">0kcal</div>
                                <div id="protein-percentage" class="text-xs text-red-500 mt-1">0%</div>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                            <div class="text-center">
                                <div class="text-yellow-700 font-semibold">F (脂質)</div>
                                <div id="fat-grams" class="text-2xl font-bold text-yellow-600">0g</div>
                                <div id="fat-calories" class="text-xs text-yellow-600">0kcal</div>
                                <div id="fat-percentage" class="text-xs text-yellow-500 mt-1">0%</div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 border border-green-200 rounded-lg p-3">
                            <div class="text-center">
                                <div class="text-green-700 font-semibold">C (炭水化物)</div>
                                <div id="carb-grams" class="text-2xl font-bold text-green-600">0g</div>
                                <div id="carb-calories" class="text-xs text-green-600">0kcal</div>
                                <div id="carb-percentage" class="text-xs text-green-500 mt-1">0%</div>
                            </div>
                        </div>
                    </div>

                    <!-- 食事例 -->
                    <div class="bg-blue-50 rounded-lg p-4">
                        <h3 class="font-semibold text-blue-900 mb-2">食事例・アドバイス</h3>
                        <div class="text-sm text-blue-800 space-y-1">
                            <div><strong>タンパク質源:</strong> 鶏胸肉、卵、魚、豆腐、プロテイン</div>
                            <div><strong>脂質源:</strong> ナッツ、アボカド、オリーブオイル、魚油</div>
                            <div><strong>炭水化物源:</strong> 玄米、オートミール、さつまいも、果物</div>
                            <div class="mt-2 text-xs">
                                ※1日3-6回に分けて摂取することで栄養吸収が向上します
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentGoal = 'maintain';

        const activityMultipliers = {
            sedentary: 1.2,
            light: 1.375,
            moderate: 1.55,
            high: 1.725,
            extreme: 1.9
        };

        const goalConfigs = {
            muscle: {
                name: 'マッスル向けPFCバランス',
                desc: '筋肉増量・バルクアップ',
                color: 'red',
                calorieAdjust: 300,
                protein: 0.30,
                fat: 0.25,
                carb: 0.45
            },
            slim: {
                name: 'スリム向けPFCバランス',
                desc: '減量・ダイエット',
                color: 'blue',
                calorieAdjust: -400,
                protein: 0.35,
                fat: 0.25,
                carb: 0.40
            },
            maintain: {
                name: '現状維持向けPFCバランス',
                desc: '体型維持・健康管理',
                color: 'green',
                calorieAdjust: 0,
                protein: 0.25,
                fat: 0.30,
                carb: 0.45
            },
            athletic: {
                name: 'アスリート向けPFCバランス',
                desc: 'パフォーマンス向上',
                color: 'purple',
                calorieAdjust: 200,
                protein: 0.25,
                fat: 0.25,
                carb: 0.50
            }
        };

        function selectGoal(goal) {
            currentGoal = goal;
            
            // すべてのボタンをリセット
            document.querySelectorAll('.goal-btn').forEach(btn => {
                btn.className = 'goal-btn p-3 rounded-lg border-2 border-gray-200 hover:border-gray-300 transition-all';
            });
            
            // 選択されたボタンをアクティブに
            const selectedBtn = document.getElementById(`goal-${goal}`);
            selectedBtn.className = 'goal-btn p-3 rounded-lg border-2 border-indigo-500 bg-indigo-50 transition-all';
            
            calculatePFC();
        }

        function calculatePFC() {
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const age = parseFloat(document.getElementById('age').value);
            const gender = document.getElementById('gender').value;
            const activityLevel = document.getElementById('activityLevel').value;

            if (!height || !weight || !age) {
                document.getElementById('results').classList.add('hidden');
                return;
            }

            // 基礎代謝計算（Harris-Benedict式）
            let bmr;
            if (gender === 'male') {
                bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
            } else {
                bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
            }

            // TDEE計算
            const tdee = bmr * activityMultipliers[activityLevel];
            
            // 目標設定取得
            const goalConfig = goalConfigs[currentGoal];
            const targetCalories = tdee + goalConfig.calorieAdjust;

            // PFC計算
            const proteinCalories = targetCalories * goalConfig.protein;
            const fatCalories = targetCalories * goalConfig.fat;
            const carbCalories = targetCalories * goalConfig.carb;

            const proteinGrams = proteinCalories / 4;
            const fatGrams = fatCalories / 9;
            const carbGrams = carbCalories / 4;

            // 結果表示
            document.getElementById('bmr-value').textContent = Math.round(bmr);
            document.getElementById('tdee-value').textContent = Math.round(tdee);
            document.getElementById('target-calories').textContent = Math.round(targetCalories);

            // 目標表示
            const goalDisplay = document.getElementById('goal-display');
            goalDisplay.className = `bg-${goalConfig.color}-50 border border-${goalConfig.color}-200 rounded-lg p-4`;
            document.getElementById('goal-name').textContent = goalConfig.name;
            document.getElementById('goal-name').className = `font-semibold text-lg text-${goalConfig.color}-600`;
            document.getElementById('goal-desc').textContent = goalConfig.desc;

            // PFC表示
            document.getElementById('protein-grams').textContent = Math.round(proteinGrams) + 'g';
            document.getElementById('protein-calories').textContent = Math.round(proteinCalories) + 'kcal';
            document.getElementById('protein-percentage').textContent = Math.round(goalConfig.protein * 100) + '%';

            document.getElementById('fat-grams').textContent = Math.round(fatGrams) + 'g';
            document.getElementById('fat-calories').textContent = Math.round(fatCalories) + 'kcal';
            document.getElementById('fat-percentage').textContent = Math.round(goalConfig.fat * 100) + '%';

            document.getElementById('carb-grams').textContent = Math.round(carbGrams) + 'g';
            document.getElementById('carb-calories').textContent = Math.round(carbCalories) + 'kcal';
            document.getElementById('carb-percentage').textContent = Math.round(goalConfig.carb * 100) + '%';

            document.getElementById('results').classList.remove('hidden');
        }

        // イベントリスナー設定
        document.getElementById('height').addEventListener('input', calculatePFC);
        document.getElementById('weight').addEventListener('input', calculatePFC);
        document.getElementById('age').addEventListener('input', calculatePFC);
        document.getElementById('gender').addEventListener('change', calculatePFC);
        document.getElementById('activityLevel').addEventListener('change', calculatePFC);
    </script>
</body>
</html>
